<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Login</title>
        <link rel="stylesheet" href="style.css" />
    </head>

    <body>
        <!--NAV-->
        <nav class="navbar">
            
            <div class="nav-links" id="navLinks">
                <a href="index.html">Home</a>
                <a href="highlights.html">Highlights</a>
                <a href="about.html">About</a>
                <a href="login.html">Log in</a>
                <a href="register.html">Sign up</a>
            </div>

            <div class="hamburger-menu" id="hamburger">&#9776;</div>
        </nav>

        <main class="login-container">
        <h2>Login to Murmur</h2>
        <form id="loginForm">
            <input type="text" id="screenName" placeholder="Screen Name" required />
            <input type="password" id="password" placeholder="Password" required />
            <button type="submit">Login</button>
        </form>
        <p id="login-error" style="color:red;"></p>
        </main>

        <footer class="footer">
            <p>Follow us:</p>
            <div class="social-links">
                <a href="#">Facebook</a>
                <a href="#">Instagram</a>
                <a href="#">Twitter</a>
            </div>
         </footer>

        <script>
            document.getElementById('loginForm').onsubmit = async function (e) {
                e.preventDefault();

                const screenName = document.getElementById('screenName').value;
                const password = document.getElementById('password').value;

                const res = await fetch('/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ screenName, password })
                });

                if (res.ok) {
                sessionStorage.setItem('screenName', screenName);
                window.location.href = 'chat.html'; // redirect to chat
                } else {
                document.getElementById('login-error').textContent = 'Invalid password or screen name.';
                }
            };
        </script>
        <script>
        const hamburger = document.getElementById('hamburger');
        const navLinks = document.getElementById('navLinks');

        hamburger.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });
    </script>
    </body>