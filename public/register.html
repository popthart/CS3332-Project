<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Register</title>
        <link rel="stylesheet" href="style.css" />
        <link rel="stylesheet" href="register.css" />
    </head>

    <body>
        <!--NAV-->
        <nav class="navbar">

            <div class="nav-links" id="navLinks">
                <a href="index.html">Home</a>
                <a href="highlights.html">Highlights</a>
                <a href="about.html">About</a>
                <a href="login.html">Log in</a>
                <a href="register.html">Sign up</a>
            </div>

            <div class="hamburger-menu" id="hamburger">&#9776;</div>
        </nav>

        <main class="login-container">
        <h2>Sign up for Murmur!</h2>
        <form id="signupForm">
            <input type="text" id="displayName" placeholder="Display name" required />
            <input type="email" id="userEmail" placeholder="Email" required />
            <input type="password" id="password" placeholder="Password" required />
            <input type="password" id="rePassword" placeholder="Re-enter password" required />
            <button type="submit">Sign Up</button>
        </form>
        <p id="login-error" style="color:red;"></p>
        </main>

        <footer class="footer">
            <p>Follow us:</p>
            <div class="social-links">
                <a href="#">Facebook</a>
                <a href="#">Instagram</a>
                <a href="#">Twitter</a>
            </div>
         </footer>
         <script>
        const hamburger = document.getElementById('hamburger');
        const navLinks = document.getElementById('navLinks');

        hamburger.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });
     </script>

        <script>
            document.getElementById('signupForm').onsubmit = async function (e) {
            e.preventDefault();

            const displayName = document.getElementById('displayName').value;
            const userEmail = document.getElementById('userEmail').value;
            const password = document.getElementById('password').value;

            const res = await fetch('/register', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ displayName, userEmail, password })
            });

            if (res.ok) {
                alert('Registered! Now log in.');
                window.location.href = 'login.html';
            } else {
                document.getElementById('login-error').textContent = 'Error: Email may already be in use.';
            }
            };
        </script>
    </body>